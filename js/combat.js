function getJaneAction(){return Math.random()>.5?1:0}function endGame(){var e=document.getElementById("button-defense"),t=document.getElementById("button-talk"),a=document.getElementById("button-end");e.setAttribute("visible","false"),t.setAttribute("visible","false"),a.setAttribute("visible","true")}function refreshJohnHeart(){var e=document.getElementById("john_heart_1"),t=document.getElementById("john_heart_2"),a=document.getElementById("john_heart_3");switch(john_lives){case 3:break;case 2:a.setAttribute("visible","false");break;case 1:a.setAttribute("visible","false"),t.setAttribute("visible","false");break;default:a.setAttribute("visible","false"),t.setAttribute("visible","false"),e.setAttribute("visible","false")}}function refreshJaneHeart(){var e=document.getElementById("jane_heart_1"),t=document.getElementById("jane_heart_2"),a=document.getElementById("jane_heart_3");switch(jane_lives){case 3:break;case 2:a.setAttribute("visible","false");break;case 1:a.setAttribute("visible","false"),t.setAttribute("visible","false");break;default:a.setAttribute("visible","false"),t.setAttribute("visible","false"),e.setAttribute("visible","false")}}function black_text_big(e){return{width:4,color:"black",align:"center",value:e}}function white_text_big(e){return{width:4,color:"white",align:"center",value:e}}var john_lives=3,jane_lives=3,heal_times=0,heal_thres=3,game_status_str="Choose an action!",jane_action=0,game_state=1;AFRAME.registerComponent("defense",{init:function(){this.el.addEventListener("click",function(e){var t=document.getElementById("combat-text");1==game_state&&(0==(jane_action=getJaneAction())?(game_status_str="Jane tries to listen to you but you defense...",jane_lives--,refreshJaneHeart(),0==jane_lives&&(game_state=0,game_status_str="You killed Jane!",endGame())):game_status_str="Jane attacks you! Thankfully you defense!",t.setAttribute("text",white_text(game_status_str)))})}}),AFRAME.registerComponent("talk",{init:function(){this.el.addEventListener("click",function(e){var t=document.getElementById("combat-text");if(1==game_state){if(0==(jane_action=getJaneAction())){switch(heal_times){case 0:game_status_str='"You monster! Tell me where is John!"';break;case 1:game_status_str='"No way you are John! Tell me who you are!"';break;case 2:game_status_str='"You sounds like John! It can\'t be!"'}3==++heal_times&&(game_state=0,game_status_str="Oh my dear, let't go home and figure all this out!",endGame())}else game_status_str="You try to explain but Jane attacks you!",john_lives--,refreshJohnHeart(),0==john_lives&&(game_state=0,game_status_str="You are killed by Jane.",endGame());t.setAttribute("text",white_text(game_status_str))}})}});